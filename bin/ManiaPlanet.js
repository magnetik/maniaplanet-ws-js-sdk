// Generated by CoffeeScript 1.3.2
(function() {
  var $, Client, Dedicated, HTTPClient, Manialinks, Players, root,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  Client = (function() {

    function Client() {}

    Client.baseUrl = 'https://ws.maniaplanet.com/';

    Client.tokenUrl = "" + Client.baseUrl + "/oauth2/token/";

    Client.authorizeUrl = "" + Client.baseUrl + "/oauth2/authorize/";

    Client.prototype.getAuthorizationURL = function() {};

    return Client;

  })();

  $ = jQuery;

  HTTPClient = (function() {

    function HTTPClient(username, password) {
      this.username = username;
      this.password = password;
      this.apiURL = 'https://ws.maniaplanet.com/';
      if (!(this.username != null) || !(this.password != null)) {
        throw new SyntaxError('Please specify an username and a password');
      }
    }

    HTTPClient.prototype.execute = function(method, ressource) {
      var url;
      url = this.apiURL + ressource + '/';
      return $.ajax(url, {
        type: method,
        dataType: 'jsonp',
        jsonp: 'jsonp_callback',
        username: this.username,
        password: this.password,
        xhrFields: {
          withCredentials: true
        },
        error: function(jqXHR, textStatus, errorThrown) {
          return $('body').append("AJAX Error: " + textStatus);
        },
        success: function(data, textStatus, jqXHR) {
          return $('body').append("Successful AJAX call: " + data);
        }
      });
    };

    return HTTPClient;

  })();

  Players = (function(_super) {

    __extends(Players, _super);

    function Players() {
      this.get = __bind(this.get, this);
      return Players.__super__.constructor.apply(this, arguments);
    }

    Players.prototype.get = function(login) {
      return this.execute('get', "players/" + login);
    };

    return Players;

  })(HTTPClient);

  Dedicated = (function(_super) {

    __extends(Dedicated, _super);

    function Dedicated() {
      return Dedicated.__super__.constructor.apply(this, arguments);
    }

    Dedicated.prototype.get = function(login) {
      return execute('get', "dedicated/" + login);
    };

    return Dedicated;

  })(HTTPClient);

  Manialinks = (function(_super) {

    __extends(Manialinks, _super);

    function Manialinks() {
      return Manialinks.__super__.constructor.apply(this, arguments);
    }

    Manialinks.prototype.get = function(code) {
      return execute('get', "manialinks/" + code);
    };

    return Manialinks;

  })(HTTPClient);

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  root.Players = Players;

  root.Manialinks = Manialinks;

  root.Dedicated = Dedicated;

}).call(this);
